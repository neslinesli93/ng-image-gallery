{"version":3,"sources":["ng-image-gallery.min.js"],"names":["keys","enter","esc","left","right","angular","module","provider","defOpts","thumbnails","inline","bubbles","imgBubbles","bgClose","hideCloseButton","hideDeleteButton","hideStarButton","piracy","imgAnim","setOpts","newOpts","extend","$get","directive","$parse","scope","link","element","attrs","bind","event","preventDefault","$rootScope","$timeout","$q","$window","ngImageGalleryOpts","replace","transclude","restrict","images","methods","conf","onOpen","onClose","onDelete","template","elem","attr","openPage","url","open","showLoader","imgLoading","hideLoader","loadImg","imgObj","reject","deferred","defer","hasOwnProperty","img","Image","src","onload","cached","resolve","promise","setActiveImg","indexOf","activeImg","length","imgMoveDirection","then","activeImageIndex","undefined","$watchCollection","noop","imagesFirstWatch","$watch","activeImageIndexFirstWatch","newImgIndex","imgIndex","opened","document","body","addClass","close","removeClass","splice","star","favourite","next","prev","backgroundClose","e","noCloseClasses","i","target","classList","which","window","Hammer","hammerElem","on","ev","removeClassFromDocumentBody","$on"],"mappings":"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","file":"ng-image-gallery.min.js","sourcesContent":[" (function(){\n\t'use strict';\n\t\n\t// Key codes\n\tvar keys = {\n\t\tenter : 13,\n\t\tesc   : 27,\n\t\tleft  : 37,\n\t\tright : 39\n\t};\n\n\tangular\n\t.module('thatisuday.ng-image-gallery', ['ngAnimate'])\n\t.provider('ngImageGalleryOpts', function(){\n\t\tvar defOpts = {\n\t\t\tthumbnails  \t\t:   true,   \n\t\t\tinline      \t\t:   false,\n\t\t\tbubbles     \t\t:   true,\n\t\t\timgBubbles  \t\t:   false,   \n\t\t\tbgClose     \t\t:   false,\n\t\t\thideCloseButton :   false,\n\t\t\thideDeleteButton :   false,\n\t\t\thideStarButton :   true,\n\t\t\tpiracy\t\t\t\t\t:   false,\n\t\t\timgAnim \t\t\t\t: \t'fadeup',\n\t\t};\n\n\t\treturn{\n\t\t\tsetOpts : function(newOpts){\n\t\t\t\tangular.extend(defOpts, newOpts); \n\t\t\t},\n\t\t\t$get : function(){\n\t\t\t\treturn defOpts;\n\t\t\t}\n\t\t}\n\t})\n\t.directive('ngRightClick', ['$parse', function($parse) {\n\t  return {\n\t    scope: false,\n\t    link: function(scope, element, attrs) {\n\t      element.bind('contextmenu', function(event) {\n\t        if (scope.piracy == false) {\n\t          event.preventDefault();\n\t          return scope.piracy;\n\t        }\n\t      });\n\t    }\n\t  };\n \t}])\n\t.directive('ngImageGallery', ['$rootScope', '$timeout', '$q', '$window', 'ngImageGalleryOpts',\n\tfunction($rootScope, $timeout, $q, $window, ngImageGalleryOpts){\n\t\treturn {\n\t\t\treplace : true,\n\t\t\ttransclude : false,\n\t\t\trestrict : 'AE',\n\t\t\tscope : {\n\t\t\t\timages \t\t\t: \t'=',\t\t// []\n\t\t\t\tmethods \t\t: \t'=?',\t\t// {}\n\t\t\t\tconf \t\t\t\t: \t'=?',\t\t// {}\n\n\t\t\t\tthumbnails \t: \t'=?',\t\t// true|false\n\t\t\t\tinline \t\t\t: \t'=?',\t\t// true|false\n\t\t\t\tbubbles \t\t: \t'=?',\t\t// true|false\n\t\t\t\timgBubbles \t: \t'=?',\t\t// true|false\n\t\t\t\tbgClose \t\t: \t'=?',\t\t// true|false\n\t\t\t\thideCloseButton : \t'=?',\t\t// true|false,\n\t\t\t\thideDeleteButton : \t'=?',\t\t// true|false,\n\t\t\t\thideStarButton : \t'=?',\t\t// true|false,\n\t\t\t\tpiracy\t\t\t: \t'=?',\t\t// true|false,\n\t\t\t\timgAnim \t\t: \t'@?',\t\t// {name}\n\n\t\t\t\tonOpen \t\t\t: \t'&?',\t\t// function\n\t\t\t\tonClose \t\t: \t'&?',\t\t// function\n\t\t\t\tonDelete \t\t: \t'&?'\t\t// function\n\t\t\t},\n\t\t\ttemplate : \t'<div class=\"ng-image-gallery img-move-dir-{{imgMoveDirection}}\" ng-class=\"{inline:inline}\">'+\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Thumbnails container\n\t\t\t\t\t\t\t//  Hide for inline gallery\n\t\t\t\t\t\t\t'<div ng-if=\"thumbnails && !inline\" class=\"ng-image-gallery-thumbnails\">'+\n\t\t\t\t\t\t\t\t'<div class=\"thumb\" ng-repeat=\"image in images track by $index\" ng-click=\"methods.open($index);\" ng-style=\"{ \\'background-image\\': \\'url(\\' + (image.thumbUrl || image.url) + \\')\\' }\"  ng-attr-title=\"{{image.title || undefined}}\"></div>'+\n\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t// Modal container\n\t\t\t\t\t\t\t// (inline container for inline modal)\n\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-modal\" ng-show=\"opened\" ng-cloak>' +\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// Gallery backdrop container\n\t\t\t\t\t\t\t\t// (hide for inline gallery)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-backdrop\" ng-if=\"!inline\"></div>'+\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// Gallery contents container\n\t\t\t\t\t\t\t\t// (hide when image is loading)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-content\" ng-show=\"!imgLoading\" ng-click=\"backgroundClose($event);\">'+\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// Overlay icons at top-right of the page\n\t\t\t\t\t\t\t\t\t'<div class=\"destroy-icons-container-right\">'+\n\t\t\t\t\t\t\t\t\t\t// External link icon\n\t\t\t\t\t\t\t\t\t\t'<a class=\"ext-url\" ng-repeat=\"image in images track by $index\" ng-if=\"activeImg == image && image.extUrl\" ng-href=\"\" ng-click=\"openPage(image.extUrl)\"></a>'+\n\n\t\t\t\t\t\t\t\t\t\t// Close Icon (hidden in inline gallery)\n\t\t\t\t\t\t\t\t\t\t'<div class=\"close\" ng-click=\"methods.close();\" ng-if=\"!inline && !hideCloseButton\"></div>'+\n\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t// Overlay icons at top-left of the page\n\t\t\t\t\t\t\t\t\t'<div class=\"destroy-icons-container-left\">'+\n\t\t\t\t\t\t\t\t\t\t// Delete button\n\t\t\t\t\t\t\t\t\t\t'<div class=\"delete\" ng-click=\"methods.delete();\" ng-if=\"!hideDeleteButton\"></div>'+\n\t\t\t\t\t\t\t\t\t\t// Save as favourite button\n\t\t\t\t\t\t\t\t\t\t'<div ng-click=\"methods.star();\" ng-if=\"!hideStarButton\" ng-class=\"{\\'star-unselected\\': !activeImg.favourite, \\'star-selected\\': activeImg.favourite}\"></div>'+\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\n\t\t\t\t\t\t\t\t\t// Prev-Next Icons\n\t\t\t\t\t\t\t\t\t// Add `bubbles-on` class when bubbles are enabled (for offset)\n\t\t\t\t\t\t\t\t\t'<div class=\"prev\" ng-click=\"methods.prev();\" ng-class=\"{\\'bubbles-on\\':bubbles}\" ng-hide=\"images.length == 1\"></div>'+\n\t\t\t\t\t\t\t\t\t'<div class=\"next\" ng-click=\"methods.next();\" ng-class=\"{\\'bubbles-on\\':bubbles}\" ng-hide=\"images.length == 1\"></div>'+\n\n\t\t\t\t\t\t\t\t\t// Galleria container\n\t\t\t\t\t\t\t\t\t'<div class=\"galleria\">'+\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// Images container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-images img-anim-{{imgAnim}} img-move-dir-{{imgMoveDirection}}\">'+\n\t\t\t\t\t\t\t\t\t\t\t'<img class=\"galleria-image\" ng-right-click ng-repeat=\"image in images track by $index\" ng-if=\"activeImg == image\" ng-src=\"{{image.url}}\" ondragstart=\"return false;\" ng-attr-title=\"{{image.title || undefined}}\" ng-attr-alt=\"{{image.alt || undefined}}\"/>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Description container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" ng-if=\"activeImg.title\">'+\n\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-description\">{{activeImg.title}}</span>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Bubble navigation container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" ng-if=\"bubbles && !imgBubbles\"  ng-hide=\"images.length == 1\">'+\n\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-bubble\" ng-click=\"setActiveImg(image);\" ng-repeat=\"image in images track by $index\" ng-class=\"{active : (activeImg == image)}\"></span>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Image bubble navigation container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" ng-if=\"bubbles && imgBubbles\" ng-hide=\"images.length == 1\">'+\n\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-bubble img-bubble\" ng-click=\"setActiveImg(image);\" ng-repeat=\"image in images track by $index\" ng-class=\"{active : (activeImg == image)}\" ng-style=\"{ \\'background-image\\': \\'url(\\' + (image.bubbleUrl || image.thumbUrl || image.url) +\\')\\' }\"></span>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// Loading animation overlay container\n\t\t\t\t\t\t\t\t// (show when image is loading)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-loader\" ng-show=\"imgLoading\">'+\n\t\t\t\t\t\t\t\t\t'<div class=\"spinner\">'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect1\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect2\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect3\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect4\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect5\"></div>'+\n\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t'</div>',\n\t\t\t\t\t\t\n\t\t\tlink : function(scope, elem, attr){\n\t\t\t\t\n\t\t\t\t/*\n\t\t\t\t *\tOperational functions\n\t\t\t\t**/\n\n\t\t\t\tscope.openPage = function(url){\n\t\t\t\t\t$window.open(url, '_blank');\n\t\t\t\t}\n\n\t\t\t\t// Show gallery loader\n\t\t\t\tscope.showLoader = function(){\n\t\t\t\t\tscope.imgLoading = true;\n\t\t\t\t}\n\n\t\t\t\t// Hide gallery loader\n\t\t\t\tscope.hideLoader = function(){\n\t\t\t\t\tscope.imgLoading = false;\n\t\t\t\t}\n\n\t\t\t\t// Image load complete promise\n\t\t\t\tscope.loadImg = function(imgObj){\n\t\t\t\t\t\n\t\t\t\t\t// Return rejected promise\n\t\t\t\t\t// if not image object received\n\t\t\t\t\tif(!imgObj) return $q.reject();\n\n\t\t\t\t\tvar deferred =  $q.defer();\n\n\t\t\t\t\t// Show loder\n\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope.showLoader();\n\n\t\t\t\t\t// Process image\n\t\t\t\t\tvar img = new Image();\n\t\t\t\t\timg.src = imgObj.url;\n\t\t\t\t\timg.onload = function(){\n\t\t\t\t\t\t// Hide loder\n\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope.hideLoader();\n\n\t\t\t\t\t\t// Cache image\n\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) imgObj.cached = true;\n\n\t\t\t\t\t\treturn deferred.resolve(imgObj);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn deferred.promise;\n\t\t\t\t}\n\n\t\t\t\tscope.setActiveImg = function(imgObj){\n\t\t\t\t\t// Get images move direction\n\t\t\t\t\tif(\n\t\t\t\t\t\tscope.images.indexOf(scope.activeImg) - scope.images.indexOf(imgObj) == (scope.images.length - 1) ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\tscope.images.indexOf(scope.activeImg) - scope.images.indexOf(imgObj) <= 0 && \n\t\t\t\t\t\t\tscope.images.indexOf(scope.activeImg) - scope.images.indexOf(imgObj) != -(scope.images.length - 1)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\n\t\t\t\t\t){\n\t\t\t\t\t\tscope.imgMoveDirection = 'forward';\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tscope.imgMoveDirection = 'backward';\n\t\t\t\t\t}\n\n\t\t\t\t\t// Load image\n\t\t\t\t\tscope.loadImg(imgObj).then(function(imgObj){\n\t\t\t\t\t\tscope.activeImg = imgObj;\n\t\t\t\t\t\tscope.activeImageIndex = scope.images.indexOf(imgObj);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\t/***************************************************/\n\t\t\t\t\n\n\t\t\t\t/*\n\t\t\t\t *\tGallery settings\n\t\t\t\t**/\n\n\t\t\t\t// Modify scope models\n\t\t\t\tscope.images \t \t = \t(scope.images \t\t!= undefined) ? scope.images \t : \t[];\n\t\t\t\tscope.methods \t \t = \t(scope.methods \t\t!= undefined) ? scope.methods \t : \t{};\n\t\t\t\tscope.conf \t \t\t = \t(scope.conf \t\t!= undefined) ? scope.conf \t\t : \t{};\n\n\t\t\t\t// setting options\n\t\t\t\tscope.$watchCollection('conf', function(conf){\n\t\t\t\t\tscope.thumbnails \t = \t(conf.thumbnails \t!= undefined) ? conf.thumbnails \t: \t(scope.thumbnails \t!= undefined) \t?  scope.thumbnails\t\t: \tngImageGalleryOpts.thumbnails;\n\t\t\t\t\tscope.inline \t \t = \t(conf.inline \t\t!= undefined) ? conf.inline \t \t: \t(scope.inline \t\t!= undefined) \t?  scope.inline\t\t\t: \tngImageGalleryOpts.inline;\n\t\t\t\t\tscope.bubbles \t \t = \t(conf.bubbles \t\t!= undefined) ? conf.bubbles \t \t: \t(scope.bubbles \t\t!= undefined) \t?  scope.bubbles\t\t: \tngImageGalleryOpts.bubbles;\n\t\t\t\t\tscope.imgBubbles \t = \t(conf.imgBubbles \t!= undefined) ? conf.imgBubbles \t: \t(scope.imgBubbles \t!= undefined) \t?  scope.imgBubbles\t\t: \tngImageGalleryOpts.imgBubbles;\n\t\t\t\t\tscope.bgClose \t \t = \t(conf.bgClose \t\t!= undefined) ? conf.bgClose \t \t: \t(scope.bgClose \t\t!= undefined) \t?  scope.bgClose\t\t: \tngImageGalleryOpts.bgClose;\n\t\t\t\t\tscope.imgAnim \t \t = \t(conf.imgAnim \t\t!= undefined) ? conf.imgAnim \t \t: \t(scope.imgAnim \t\t!= undefined) \t?  scope.imgAnim\t\t: \tngImageGalleryOpts.imgAnim;\n\t\t\t\t\tscope.hideCloseButton \t \t = \t(conf.hideCloseButton \t\t!= undefined) ? conf.hideCloseButton \t \t: \t(scope.hideCloseButton \t\t!= undefined) \t?  scope.hideCloseButton\t\t: \tngImageGalleryOpts.hideCloseButton;\n\t\t\t\t\tscope.hideDeleteButton \t \t = \t(conf.hideDeleteButton \t\t!= undefined) ? conf.hideDeleteButton \t \t: \t(scope.hideDeleteButton \t\t!= undefined) \t?  scope.hideDeleteButton\t\t: \tngImageGalleryOpts.hideDeleteButton;\n          scope.hideStarButton     =  (conf.hideStarButton    != undefined) ? conf.hideStarButton     :   (scope.hideStarButton     != undefined)   ?  scope.hideStarButton   :   ngImageGalleryOpts.hideStarButton;\n\t\t\t\t\tscope.piracy \t \t = \t(conf.piracy \t\t!= undefined) ? conf.piracy \t \t: \t(scope.piracy \t\t!= undefined) \t?  scope.piracy\t\t: \tngImageGalleryOpts.piracy;\n\t\t\t\t});\n\n\t\t\t\tscope.onOpen \t \t = \t(scope.onOpen \t\t!= undefined) ? scope.onOpen \t : \tangular.noop;\n\t\t\t\tscope.onClose \t \t = \t(scope.onClose \t\t!= undefined) ? scope.onClose \t : \tangular.noop;\n\t\t\t\tscope.onDelete \t \t = \t(scope.onDelete \t\t!= undefined) ? scope.onDelete \t : \tangular.noop;\n\t\t\t\t\n\t\t\t\t// If images populate dynamically, reset gallery\n\t\t\t\tvar imagesFirstWatch = true;\n\t\t\t\tscope.$watch('images', function(){\n\t\t\t\t\tif(imagesFirstWatch){\n\t\t\t\t\t\timagesFirstWatch = false;\n\t\t\t\t\t}\n\t\t\t\t\telse if(scope.images.length) scope.setActiveImg(\n\t\t\t\t\t\tscope.images[scope.activeImageIndex || 0]\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\t// Watch index of visible/active image\n\t\t\t\t// If index changes, make sure to load/change image\n\t\t\t\tvar activeImageIndexFirstWatch = true;\n\t\t\t\tscope.$watch('activeImageIndex', function(newImgIndex){\n\t\t\t\t\tif(activeImageIndexFirstWatch){\n\t\t\t\t\t\tactiveImageIndexFirstWatch = false;\n\t\t\t\t\t}\n\t\t\t\t\telse if(scope.images.length){\n\t\t\t\t\t\tscope.setActiveImg(\n\t\t\t\t\t\t\tscope.images[newImgIndex]\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Open modal automatically if inline\n\t\t\t\tscope.$watch('inline', function(){\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\tif(scope.inline) scope.methods.open();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\n\t\t\t\t/***************************************************/\n\n\n\t\t\t\t/*\n\t\t\t\t *\tMethods\n\t\t\t\t**/\n\n\t\t\t\t// Open gallery modal\n\t\t\t\tscope.methods.open = function(imgIndex){\n\t\t\t\t\t// Open modal from an index if one passed\n\t\t\t\t\tscope.activeImageIndex = (imgIndex) ? imgIndex : 0;\n\n\t\t\t\t\tscope.opened = true;\n\n\t\t\t\t\t// set overflow hidden to body\n\t\t\t\t\tif(!scope.inline) angular.element(document.body).addClass('body-overflow-hidden');\n\n\t\t\t\t\t// call open event after transition\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\tscope.onOpen();\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\t// Close gallery modal\n\t\t\t\tscope.methods.close = function(){\n\t\t\t\t\tscope.opened = false; // Model closed\n\n\t\t\t\t\t// set overflow hidden to body\n\t\t\t\t\tangular.element(document.body).removeClass('body-overflow-hidden');\n\n\t\t\t\t\t// call close event after transition\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\tscope.onClose();\n\t\t\t\t\t\tscope.activeImageIndex = 0; // Reset index\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\t// Delete image\n\t\t\t\tscope.methods.delete = function(){\n\t\t\t\t\tscope.onDelete().then(function() {\n\t\t\t\t\t\t// Set the new index and image object\n\t\t\t\t\t\tif (scope.activeImageIndex != 0) {\n\t\t\t\t\t\t\tscope.images.splice(scope.activeImageIndex, 1);\n\t\t\t\t\t\t\tscope.setActiveImg(scope.images[scope.activeImageIndex - 1]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tscope.images.splice(scope.activeImageIndex, 1);\n\t\t\t\t\t\t\tscope.setActiveImg(scope.images[0]);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Toggle image as favourite\n\t\t\t\tscope.methods.star = function() {\n\t\t\t\t\tscope.activeImg.favourite = !scope.activeImg.favourite;\n\t\t\t\t}\n\n\t\t\t\t// Change image to next\n\t\t\t\tscope.methods.next = function(){\n\t\t\t\t\tif(scope.activeImageIndex == (scope.images.length - 1)){\n\t\t\t\t\t\tscope.activeImageIndex = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tscope.activeImageIndex = scope.activeImageIndex + 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Change image to prev\n\t\t\t\tscope.methods.prev = function(){\n\t\t\t\t\tif(scope.activeImageIndex == 0){\n\t\t\t\t\t\tscope.activeImageIndex = scope.images.length - 1;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tscope.activeImageIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Close gallery on background click\n\t\t\t\tscope.backgroundClose = function(e){\n\t\t\t\t\tif(!scope.bgClose || scope.inline) return;\n\n\t\t\t\t\tvar noCloseClasses = [\n\t\t\t\t\t\t'galleria-image',\n\t\t\t\t\t\t'destroy-icons-container-right',\n\t\t\t\t\t\t'destroy-icons-container-left',\n\t\t\t\t\t\t'ext-url',\n\t\t\t\t\t\t'close',\n\t\t\t\t\t\t'delete',\n\t\t\t\t\t\t'next',\n\t\t\t\t\t\t'prev',\n\t\t\t\t\t\t'galleria-bubble',\n\t\t\t\t\t\t'galleria-description'\n\t\t\t\t\t];\n\n\t\t\t\t\t// check if clicked element has a class that\n\t\t\t\t\t// belongs to `noCloseClasses`\n\t\t\t\t\tfor(var i = 0; i < e.target.classList.length; i++){\n\t\t\t\t\t\tif(noCloseClasses.indexOf(e.target.classList[i]) != -1){\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope.methods.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t/***************************************************/\n\n\n\t\t\t\t/*\n\t\t\t\t *\tUser interactions\n\t\t\t\t**/\n\n\t\t\t\t// Key events\n\t\t\t\tangular.element(document).bind('keyup', function(event){\n\t\t\t\t\t// If inline modal, do not interact\n\t\t\t\t\tif(scope.inline) return;\n\n\t\t\t\t\tif(event.which == keys.right || event.which == keys.enter){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.methods.next();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.which == keys.left){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.methods.prev();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(event.which == keys.esc){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.methods.close();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Swipe events\n\t\t\t\tif(window.Hammer){\n\t\t\t\t\tvar hammerElem = new Hammer(elem[0]);\n\t\t\t\t\thammerElem.on('swiperight', function(ev){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.methods.prev();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\thammerElem.on('swipeleft', function(ev){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.methods.next();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\n\t\t\t\t/***********************************************************/\n\n\n\t\t\t\t/*\n\t\t\t\t *\tActions on angular events\n\t\t\t\t**/\n\t\t\t\t\n\t\t\t\tvar removeClassFromDocumentBody = function(){\n\t\t\t\t\tangular.element(document.body).removeClass('body-overflow-hidden');\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$rootScope.$on('$stateChangeSuccess', removeClassFromDocumentBody);\n\t\t\t\t$rootScope.$on('$routeChangeSuccess', removeClassFromDocumentBody);\n\n\t\t\t}\n\t\t}\n\t}]);\n })();"]}